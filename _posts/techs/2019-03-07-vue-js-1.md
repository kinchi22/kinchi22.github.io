---
layout: post
title: "Vue w/ TypeScript: 프로젝트 시작하기"
author: sk
teaser: 요즘 회사에서 레거시 시스템의 재개발을 추진하고 있어서, 평소 관심있게 가지고 놀던 Vue.js를 본격적으로 파기 시작했다. 새로운 레거시의 탄생을 막기 위해 고려해야할 점들 안에서, 강타입 컴파일 언어가 요구 사항으로 거론되었다. 문제는 현재 시점(Vue.js의 최신 버전 2.6.8)에서 Vue.js의 공식 문서는 모두 JavaScript의 사용을 전제로 쓰여져 있다는 점이다.
categories:
  - Technology
tags:
  - "Vue.js"
  - TypeScript
  - Tutorial
image: assets/images/programming/vue-js-1.jpg
---
# Background
요즘 회사에서 레거시 시스템의 재개발을 추진하고 있어서, 평소 관심있게 가지고 놀던 Vue.js를 본격적으로 파기 시작했다. 새로운 레거시의 탄생을 막기 위해 고려해야할 점들 안에서, 강타입 컴파일 언어가 요구 사항으로 거론되었다. 문제는 현재 시점(Vue.js의 최신 버전 2.6.8)에서 Vue.js의 공식 문서는 모두 JavaScript의 사용을 전제로 쓰여져 있다는 점이다. 하지만 [Vue.js에서도 TypeScript에 대한 지원을 강화하려는 조짐][2]이 있고, 핵심 멤버들에 의해 관리되고 있는 [Vue CLI][1]가 버전 3.0부터 완벽하게 TypeScript 개발 환경을 지원하고 있기 때문에 공식 문서가 JavaScript를 기준으로 쓰여져 있음에도 불구하고 TypeScript를 사용하는 Vue를 소개하려 한다.

왜 TypeScript를 사용해야 하는가에 대한 짧으면서도 좋은 비디오가 있어 소개한다.
<iframe width='970' height='546' src='//www.youtube.com/embed/wDYS6FIXkAc' frameborder='0' allowfullscreen></iframe>

### vue-class-component
Vue를 TypeScript와 함께 사용하려 할 때 한 가지 더 고려해야 하는 것이 있다. 바로 클래스 스타일 컴포넌트이다. [vue-class-component][3]는 클래스 스타일의 Vue 컴포넌트를 사용할 수 있게 해주는 라이브러리로, Vue CLI와 마찬가지로 Vue.js의 핵심 멤버에 의해 관리되고 있다. 클래스 스타일 컴포넌트를 왜 고려해야 하는지 본격적으로 알아보기 전에, JavaScript를 이용한 기본 Vue.js 스타일의 컴포넌트와 TypeScript를 이용한 클래스 스타일의 컴포넌트를 직접 비교해보자.

***The component of Vanilla Vue***
```js
<script>
export default {
  /** component name */
  name: 'hello-vue',

  /** props */
  props: ['val'],

  /** data */
  data() {
    return {
      value: this.val,
      inputValue: '',
    };
  },

  /** lifycycle hooks */
  mounted() {
    console.log('mounted');
  },
  /** computed */
  computed: {
    isDisabled() {
      return this.inputValue === '';
    },
  },

  /** methods */
  methods: {
    handleInput($event) {
      this.inputValue = $event.target.value;
    },
    handleClick() {
      if (this.inputValue === '') {
        return;
      }
      this.value = this.inputValue;
      this.inputValue = '';

      /** emit custom event */
      this.$emit('handle-click', this.value);
    },
  },

  /** watch */
  watch: {
    value(newValue, oldValue) {
      console.log(`watch: ${newValue}, ${oldValue}`);
    },
  },

  /** filters */
  filters: {
    convertUpperCase(value) {
      if (!value) return;
      return value.toUpperCase();
    },
  },
};
</script>
```

***Class style Vue component with TypeScript***
```ts
<script lang="ts">
import { Component, Prop, Emit, Watch, Vue } from 'vue-property-decorator';

@Component({
  /** filters */
  filters: {
    convertUpperCase(value: string): string | null {
      if (!value) {
        return null;
      }
      return value.toUpperCase();
    },
  },
})
export default class HelloVue extends Vue {
  /** props */
  @Prop() val!: string;

  /** data */
  value: string = this.val;
  inputValue: string = '';

  /** emit */
  @Emit('handle-click')
  clickButton(val: string): void {}

  /** watch */
  @Watch('value')
  onValueChange(newValue: string, oldValue: string): void {
    console.log(`watch: ${newValue}, ${oldValue}`);
  }

  /** computed */
  get isDisabled(): boolean {
    return this.inputValue === '';
  }

  /** lifecycle hook */
  mounted(): void {
    console.log('mounted');
  }

  /** methods */
  handleInput($event: Event): void {
    this.inputValue = (($event.target as any) as HTMLInputElement).value;
  }
  handleClick(): void {
    if (this.inputValue === '') {
      return;
    }
    this.value = this.inputValue;
    this.inputValue = '';
    this.clickButton(this.value);
  }
}
</script>
```

어느 쪽이 더 가독성이 좋은가? 클래스 스타일 컴포넌트를 이용하면 하위 컴포넌트와 프로퍼티, 데이터 등을 우리가 익숙한 클래스 스타일로 관리하는 것이 가능해진다.

# Create the project
node나 Vue CLI의 설치는 공식 문서에 자세히 설명되어 있기 때문에 생략한다.

Vue CLI 버전 3이 정상적으로 설치된 상태라면 아래 명령어를 통해 Vue 프로젝트를 생성할 수 있다.
```bash
vue create vue-ts-front
```
그러면 새로운 Vue 프로젝트에 사용할 기술 스택 옵션을 선택할 수 있다. 본 튜토리얼에서는 다음과 같은 설정으로 진행하려 한다.

{:refdef: style="text-align: center;"}
![vue-create]({{ site.baseurl }}/assets/images/programming/vue-js-1-vue-create.png)
{:refdef}

프로젝트의 생성이 완료되면 다음과 같은 파일 구조가 완성될 것이다.
```
.
├── dist                // Compiled output will come here
├── node_modules        // Libraries
├── public
│   └── index.html      // The main app file
├── src
│   ├── assets
│   ├── components
│   ├── views
│   ├── App.vue
│   ├── main.ts         // TypeScript file that drives the app
│   ├── router.ts       // Router for SPA
│   └── store.ts
└── tests
```

프로젝트 디렉토리로 이동한 뒤 개발 모드로 로컬 웹서버를 올려 확인해보자.
```bash
npm run serve
```

브라우저에서 `localhost:8080` 으로 접속하면 기본적으로 만들어진 웹 어플리케이션이 정상적으로 동작하고 있는 것을 확인할 수 있다.
{:refdef: style="text-align: center;"}
![helloworld]({{ site.baseurl }}/assets/images/programming/vue-js-1-helloworld.png)
{:refdef}

[1]: https://cli.vuejs.org/
[2]: https://vuejs.org/v2/guide/typescript.html
[3]: https://github.com/vuejs/vue-class-component